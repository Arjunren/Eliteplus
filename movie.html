<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Movie Player - ELITES+</title>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.7.0/fonts/remixicon.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
    <style>
        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
            font-family: "Montserrat", sans-serif;
        }

        body {
            width: 100%;
            min-height: 100vh;
            margin: 0;
            background: linear-gradient(160deg, #f1ab11, #311803);
            background-attachment: fixed;
            background-repeat: no-repeat;
            background-size: cover;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: linear-gradient(90deg, #111, #484646);
        }

        main {
            margin-top: 10px;
            padding: 0 10px;
        }

        footer {
            background-color: #fff;
            padding: 10px;
        }

        h1,
        h2,
        p,
        blockquote {
            color: #111;
        }

        #player {
            margin-top: 20px;
            display: flex;
            justify-content: center;
        }

        .movie-info {
            display: flex;
            flex-direction: column;
            padding: 10px;
            color: #fff;
        }
    </style>
</head>

<body>
    <header>
        <h1 style="color:#fff;cursor:pointer;" onclick="window.location.href='index.html'">ELITES +</h1>
    </header>

    <main>
        <div id="player"></div>

        <div class="movie-info">
            <h1 id="title"></h1>
            <p id="overview"></p>
        </div>
    </main>

    <footer>
        <p style="font-weight:bold;">ELITES+©2025-2026</p>
        <blockquote>
            Data provided by Consumet and TMDb API. ELITES+ doesn’t host movies; we only share links.
        </blockquote>
    </footer>

    <script>
        const API_BASE = "https://eliteplus.pythonanywhere.com";
        const params = new URLSearchParams(window.location.search);
        const movieId = params.get("id");

        if (!movieId) {
            document.body.innerHTML = "<h2>Movie ID is required!</h2>";
        } else {
            fetch(`${API_BASE}/api/movie?id=${movieId}`, { mode: 'cors' })
                .then(async res => {
                    if (!res.ok) {
                        const text = await res.text();
                        throw new Error(`HTTP ${res.status}: ${text}`);
                    }
                    return res.json();
                })
                .then(movie => {
                    document.getElementById("title").textContent = movie.title +
                        (movie.original_title && movie.original_title !== movie.title ? ` (${movie.original_title})` : "");
                    document.getElementById("overview").textContent = movie.overview || "No overview available.";

                    document.getElementById("player").innerHTML = `
                <iframe
                    src="https://vidsrc.to/embed/movie/${movie.id}"
                    width="100%" 
                    height="500" 
                    frameborder="0" 
                    allow="fullscreen; encrypted-media">
                </iframe>
            `;
                })
                .catch(err => {
                    console.error("Error fetching movie:", err);
                    document.body.innerHTML = `<h2>Error loading movie data!<br>${err.message}</h2>`;
                });
        }
    </script>


</body>

</html>